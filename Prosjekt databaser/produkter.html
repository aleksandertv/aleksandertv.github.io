<!DOCTYPE html>
<html lang="nb" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Alveto - Forside</title>
    <link rel="stylesheet" href="stilark.css">
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAYjQqL4aFw1GtynRH4832HuESJDaMqFmc",
        authDomain: "prosjektalvetodatabaser.firebaseapp.com",
        databaseURL: "https://prosjektalvetodatabaser.firebaseio.com",
        projectId: "prosjektalvetodatabaser",
        storageBucket: "prosjektalvetodatabaser.appspot.com",
        messagingSenderId: "332394662422"
      };
      firebase.initializeApp(config);
    </script>
  </head>
  <body>
    <header>
      <nav>
        <ul>
          <li style="float:left"><a href="">Klær</a></li>
          <li style="float:left"><a href="">Nylig lagt til</a></li>
          <li style="float:left"><a href="">Salg</a></li>
          <li style="float:right"><a href="">Handlekurv</a></li>
          <li style="float:right"><a href="">Ønskeliste</a></li>
          <li style="float:right"><a href="">Logg inn</a></li>
        </ul>
      </nav>
    </header>
    <aside>
      <ul id="ulKategorier">

      </ul>
    </aside>
    <main>
      <button type="button" name="button" onclick="pris1()">Pris (Lav til høy)</button>
      <button type="button" name="button" onclick="pris2()">Pris (Høy til lav)</button>
      <section id="secKlaer">

      </section>
    </main>
    <footer>

    </footer>
    <script type="text/javascript">
      const db = firebase.database();
      const klaer = db.ref("Klaer");
      const sko = db.ref("Klaer/Sko");
      const bukser = db.ref("Klaer/Bukser");
      const gensere = db.ref("Klaer/Gensere");
      const tskjorter = db.ref("Klaer/Tskjorter");
      const tilbehoer = db.ref("Klaer/Tilbehoer");
      const skjorter = db.ref("Klaer/Skjorter");
      const jakker = db.ref("Klaer/Jakker");
      const undertoey = db.ref("Klaer/Undertoey");

      const ulKategorier = document.querySelector("#ulKategorier");
      const secKlaer = document.querySelector("#secKlaer");

      function visKategorier(snapshot){
        console.log(snapshot.val());
        let klesplagg = snapshot.val();
        ulKategorier.innerHTML += `
          <div class="kategori">${klesplagg.klaer}</div>
          `
        };

      function visKlaer1(snapshot){
        console.log(snapshot.val());
        let klesplagg = snapshot.val();
        secKlaer.innerHTML += `
          <div class="bilde"><img src="${klesplagg.bilde1}"></div>
          <div class="produktnavn">${klesplagg.produktnavn}</div>
          <div class="merkenavn">${klesplagg.merkenavn}</div>
          <div class="pris">${klesplagg.pris} kr</div>
          <div class="tilbud">${klesplagg.tilbud}</div>
          `
        };

        function visKlaer2(snapshot) {
          console.log(snapshot.val());
          let klesplagg = snapshot.val();
          let nySec = document.createElement("section");
          nySec.innerHTML += `
            <div class="bilde"><img src="${klesplagg["bilde1"]}"></div>
            <div class="produktnavn">${klesplagg.produktnavn}</div>
            <div class="merkenavn">${klesplagg.merkenavn}</div>
            <div class="pris">${klesplagg.pris} kr</div>
            <div class="tilbud">${klesplagg.tilbud}</div>
          `
          secKlaer.insertBefore(nySec,secKlaer.childNodes[0]);
        };

        function visAlle(){
          secKlaer.innerHTML = ``;
          sko
            .on("child_added",visKlaer1);
          bukser
            .on("child_added",visKlaer1);
          gensere
            .on("child_added",visKlaer1);
          tskjorter
            .on("child_added",visKlaer1);
          tilbehoer
            .on("child_added",visKlaer1);
          skjorter
            .on("child_added",visKlaer1);
          jakker
            .on("child_added",visKlaer1);
          undertoey
            .on("child_added",visKlaer1);
        };

        function pris1(){
          secKlaer.innerHTML = ``;
          sko
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          bukser
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          gensere
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          tskjorter
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          tilbehoer
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          skjorter
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          jakker
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          undertoey
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
        };

        function pris2(){
          secKlaer.innerHTML = ``;
          sko
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          bukser
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          gensere
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          tskjorter
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          tilbehoer
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          skjorter
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          jakker
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
          undertoey
            .orderByChild("Pris")
            .on("child_added",visKlaer1);
        };

        function alleKategorier(){
          secKlaer.innerHTML = ``;
          klaer
            .orderByChild("Produktnavn")
            .on("child_added",visKategorier);
        };

        alleKategorier();
        visAlle();

/*
  Bare få "tilbud" til å vises hvis den er "true" ?
  Hvordan få alt sortert på en gang ?
  Hvordan hente ut "Sko","Bukser"... ?
  Hvordan få mellomrom mellom arrays ?
  Hvordan få tilbud til å ganges med 100 ?
*/
    </script>
  </body>
</html>
